# Secured Kafka Configuration
# This configuration enables SSL/TLS encryption and SASL authentication
# Suitable for production environments

# Broker ID
broker.id=0

# Listeners with SSL/TLS and SASL
listeners=SASL_SSL://0.0.0.0:29093,SASL_SSL_HOST://0.0.0.0:9093
advertised.listeners=SASL_SSL://kafka-secured:29093,SASL_SSL_HOST://localhost:9093
listener.security.protocol.map=SASL_SSL:SASL_SSL,SASL_SSL_HOST:SASL_SSL

# Log directories
log.dirs=/tmp/kafka-logs-secured

# Zookeeper connection
#zookeeper.connect=localhost:2181
zookeeper.connect=zookeeper:2181
# zookeeper.connection.timeout.ms=30000
# zookeeper.session.timeout.ms=30000

# Security settings (ENABLED)
security.inter.broker.protocol=SASL_SSL
authorizer.class.name=kafka.security.auth.SimpleAclAuthorizer
super.users=User:admin

# SSL Configuration
ssl.keystore.location=/etc/kafka/secrets/kafka.server.keystore.jks
ssl.keystore.password=kafka123
ssl.key.password=kafka123
ssl.truststore.location=/etc/kafka/secrets/kafka.server.truststore.jks
ssl.truststore.password=kafka123
ssl.endpoint.identification.algorithm=
ssl.client.auth=required

# SASL Configuration
sasl.enabled.mechanisms=SCRAM-SHA-512
sasl.mechanism.inter.broker.protocol=SCRAM-SHA-512
sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required \
    username="admin" \
    password="admin123";

# Log retention
log.retention.hours=168
log.segment.bytes=1073741824
log.retention.check.interval.ms=300000

# Replication settings
default.replication.factor=1
min.insync.replicas=1

# Message settings
message.max.bytes=1000000
replica.fetch.max.bytes=1048576

# Performance settings
num.network.threads=3
num.io.threads=8
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600

# Log flush settings
log.flush.interval.messages=10000
log.flush.interval.ms=1000

# Auto create topics (disabled for security)
auto.create.topics.enable=false

# Delete topic enable
delete.topic.enable=true

# Compression
compression.type=snappy

# Metrics
metric.reporters=
metrics.num.samples=2
metrics.recording.level=INFO
metrics.sample.window.ms=30000

# JVM settings
jvm.perf.logging=false

# Logging
log4j.rootLogger=INFO, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=[%d] %p %m (%c)%n
